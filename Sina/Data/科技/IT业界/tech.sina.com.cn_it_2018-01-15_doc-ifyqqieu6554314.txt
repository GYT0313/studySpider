　　处理器漏洞制造“全球性恐慌”　　国内云服务厂商第一时间拿出应对方案 个人用户受影响有限　　IT时报记者 戚夜云　　2018年伊始，整个IT界陷入了 CPU漏洞带来的恐慌之中。　　Google旗下的Project Zero团队发现了英特尔CPU存在两大严重漏洞：Spectre（幽灵）和Meltdown（熔断）。漏洞是因为先天性的架构设计缺陷所导致，可以让非特权用户访问系统内存从而读取敏感信息。换句话说，黑客可以通过这两个漏洞窃取计算机内的全部内存内容。　　紧接着业界人士发现，受影响的不仅仅是英特尔，还有和ARM。由于这三者在处理器市场上有着非常高的份额，意味着无论是Windows、Linux、Mac系统还是移动端的Android，都存在潜在的安全威胁，其中以英特尔芯片受影响最为严重。　　这次“史诗级”CPU“漏洞门”危机全球。在中国，上海、天津等地的网信办部门已经发出预警通报，要求相关单位启动网络安全应急预案，并采取应对措施。　　专家认为，此次“漏洞门”对云服务厂商造成较大影响，而对个人影响较小，安装补丁后，性能损失有限。不过因为应对及时，业内人士对这一事件均保持乐观态度。　　云服务提供商通常大量依赖虚拟化技术，很多云服务主机实际上是将每个CPU线程通过虚拟机的形式出租出去。比如通过虚拟机，可以在一台计算机上虚拟出十几台互相可以独立操作的计算机系统。“过高依赖CPU内核的虚拟化技术和主要以访问外部I/O（输入输出）设备为主的使用场景，使得在此次的安全风险中，云服务厂商受到的影响较大。”业内人士赵晓峰（化名）说道。　　那么具体是如何影响的呢？赵晓峰打比方说：“我拿着假的录取通知书去拿宿舍钥匙，我虽然会被发现是假冒的，但是在这一过程中，我会发现相应学号对应的相应宿舍。这样，我就能推测出不同专业的学生住在哪了。”　　也就是说，利用Meltdown漏洞，低权限用户可以访问内核的内容，获取本地操作系统底层的信息；当用户通过浏览器访问了包含Spectre恶意利用程序的网站时，用户的个人隐私信息可能会被泄露。　　个人信息的泄露尚且有限，对于搭载英特尔芯片的企业用户而言，若是商业机密遭泄露，那无疑是致命的。在云服务场景中，利用Spectre漏洞可以突破用户间的隔离，窃取其他用户的数据。“云服务中的用户隔离是云安全的基石，Spectre漏洞突破云服务中用户隔离的能力可以对云服务产生致命的危害。”安全玄武实验室负责人于旸解释道。　　目前国内云服务厂商反应相当迅速，纷纷在第一时间拿出解决方案。表示，解决该安全隐患的完整修复方案包含两个部分，一是云平台虚拟化宿主机修复，二是客户侧的操作系统更新。目前，云已经启动了云平台底层基础架构的漏洞修复更新，最迟于北京时间1月12日24点之前完成。云方面对《IT时报》记者表示，在发现问题的第一时间启动应急措施，积极推进漏洞修复。“对于虚拟机系统，根据各个系统的osvc(智能桌面虚拟化)，厂商做的修复及时更新，用户只需要及时更新补丁即可。云平台的物理机层面，将于2018年1月12日零点进行热修复升级。”百度云方面称。　　腾讯、华为、金山、、等云服务厂商均发布了相关通知，进行平台安全升级。不过业内人士认为，为了防御这两组漏洞，云厂商需要更新硬件设备，升级操作系统，这必将带来服务成本的上升。　　虽然英特尔的CPU漏洞已经存在20年之久，影响面十分广泛，但是截至目前，尚未发现相关攻击案例。　　于旸表示，这是因为发起攻击的难度比较大，“由于此漏洞是CPU硬件级别的，对这类漏洞的研究需要很深的专业知识，门槛比一般的软件应用漏洞挖掘要高很多。同时由于这两组漏洞只会造成信息泄露，不依靠其他漏洞很难发起完整的远程攻击。”　　“侧信道攻击（英特尔将此次被利用漏洞的攻击称为测信道攻击Side Channel attack）其实不是现在才有的，但CPU漏洞无疑提高了被攻击后的风险，使攻击者获得更多数据。但是这一切的前提是，之前一系列操作都没有被安全软件和系统安全机制甚至硬件安全机制察觉，这本身也是很难的。”赵晓峰说道。　　攻击案例尚未发生的另一方面原因在于，很多人未意识到芯片设计存在漏洞，或者不认为这是漏洞。　　赵晓峰表示：“在过去，英特尔不认为Meldtown是漏洞，但现在被认为是漏洞。Spectre可以认为是，过去大家都不觉得这是漏洞而现在是漏洞的漏洞。”　　这样的例子在IT史上并不少见，比如计算机语言中有“二分法”查找思想，于1946年提出，1962年被认为无误，但是在10年前推翻了这一说法。“同理，分支预测和乱序执行的思想（导致Spectre漏洞）也经历了提出、论证成功、不断改进、大规模使用到现在发现漏洞，这是一个长期的过程，或许10年后我们还会发现今天认为没错的设计，是一个漏洞。”　　比起安全方面的危害，更多企业和个人用户担心的是修补漏洞带来的“30%”的性能损失。不过对于“30%性能损失”的说法，英特尔方面予以了否认。同时，、微软、和Google的测试结果也都表明系统更新不会对性能造成太大影响。　　“最初的性能损失评估是针对Meltdown漏洞，通过设立用户权限和内核权限的页表隔离，因为这样一旦用户对内核进行访问，就会受到严格的页表检查，换句话，权限的检查被提前了，这样导致某些应用下性能会下降，尤其是虚拟机，因为是通过应用程序借助CPU虚拟化技术虚拟一个新的计算机系统，这被推测有大量内核与用户数据之间的访问，而这类应用估计会有5%-30%的损失。”赵晓峰说道。　　赵晓峰对英特尔酷睿i77700HQ处理器在更新补丁前后进行了一些测试，包括使用sisoftware 2017的内存事务性测试，.net公共虚拟机语言环境的算术和SIMD测试（广义虚拟机下的计算测试），内存与缓存带宽测试和在Android studio上使用虚拟设备运行安兔兔的测试，“目前来看，个人电脑无需担心，除了安兔兔有一两项有明显影响外（原因还不能确定是补丁影响），总体没有明显的性能变化。”　　对于IT行业而言，业内专家张攀表示“性能损失不是一件坏事”，CPU架构的发展都是缘起于如何解决问题。当前CPU架构已许久没有创造性地改造，这个问题有可能成为CPU架构更新的契机，推动CPU的进步，从而造福IT产业。